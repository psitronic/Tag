!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r);!function(e){$("body").append(e)}('\r\n<div id="tag-main" class="tag-fixed-right-panel tag-small">\r\n    \x3c!-- Icon --\x3e\r\n    <div id="tag-trigger-icon">\r\n        <svg viewbox="0 0 50 50">\r\n            <defs>\r\n                <mask id="mask" x="0" y="0" width="50" height="50">\r\n                    <rect x="0" y="0" width="50" height="50" fill="#fff" />\r\n                    <text text-anchor="middle" x="25" y="42" font-size="40" font-family="arial">T</text>\r\n                </mask>\r\n            </defs>\r\n            <rect x="0" y="0" width="50" height="50" mask="url(#mask)" fill="rgb(0, 180, 140)" fill-opacity="1"/>\r\n        </svg>\r\n    </div>\r\n    \x3c!-- Content --\x3e\r\n    <div id="tag-content">\r\n        <a href="#">\r\n            \x3c!-- TODO: Replace settings S with icon --\x3e\r\n            <div id="tag-settings-icon" title="Open Settings Website">S</div>\r\n        </a>\r\n        <form name="new-message">\r\n            <textarea type="text" placeholder="New Tag"></textarea>\r\n            <button type="submit">Post Tag</button>\r\n        </form>\r\n        <ul id="tag-messages"></ul>\r\n    </div>\r\n</div>'),(0,a.default)()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(){var e=function(){function e(t){r(this,e),this.baseUrl=t}return a(e,[{key:"apiCall",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=this.baseUrl+t;switch(n){case"GET":var a="?"+Object.entries(e).map(function(e){return e.join("=")}).join("&");return this._get(r+a);case"POST":return this._post(r,e);default:return Promise.reject("unsupported method")}}},{key:"_get",value:function(e){return new Promise(function(t,n){$.getJSON(e).done(t).fail(n)})}},{key:"_post",value:function(e,t){return new Promise(function(n,r){$.post(e,t).done(n).fail(r)})}}]),e}(),t=new e("https://stickertags2.glitch.me/");t.getMessages=function(){var e={website:n()};return this.apiCall(e,"getMessages")},t.postMessage=function(e){var t={website:n(),message:e};return this.apiCall(t,"postMessage","POST")};var n=function(){var e=window.location.host+window.location.pathname;return e.includes("index.")&&(e=e.substring(0,e.indexOf("index."))),e};t.getMessages=function(){return Promise.resolve([{author:"Lui",text:"Awesome Atmosphere"},{author:"Ian",text:"Hello World!"},{author:"Laslo",text:"Really beautiful website <3"},{author:"Iris",text:"#FAQ is really interesting"}])},t.postMessage=function(e){return Promise.resolve({author:"you",text:e})},$(document).ready(function(){$("#tag-trigger-icon").on("click",function(e){$("#tag-main").toggleClass("tag-small")}),t.getMessages().then(function(e){i(e.length?e:[{author:"Tag Team",text:"#First"}])}).catch(function(e){console.error(e)}),c()});var i=function(e){return e.forEach(s)},o=function(e){return $("#tag-messages").prepend(u(e))},s=function(e){return $("#tag-messages").append(u(e))},u=function(e){return'\n    <li class="tag-message">\n        <header>\n            <h4 class="tag-author">'+e.author+'</h4>\n        </header>\n        <p class="tag-text">'+e.text+"</p>\n    </li>\n"},c=function(){$('form[name="new-message"] *').focus(function(e){$(this).parent().children('button[type="submit"]').fadeIn()});var e=function(e){e.preventDefault();var n=$('form[name="new-message"] textarea').val();t.postMessage(n).then(function(e){$('form[name="new-message"] textarea').val(""),o(e)}).catch(function(){return alert("Error while creating message :/")})};$('form[name="new-message"]').submit(e),$('form[name="new-message').keydown(function(t){t.ctrlKey&&13===t.which&&e(t)})}}}]);