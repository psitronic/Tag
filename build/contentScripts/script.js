!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";var r=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r);!function(e){$("body").append(e)}('\r\n<div id="tag-main" class="tag-fixed-right-panel tag-small">\r\n    \x3c!-- Icon --\x3e\r\n    <div id="tag-trigger-icon">\r\n        <svg viewbox="0 0 50 50">\r\n            <defs>\r\n                <mask id="mask" x="0" y="0" width="50" height="50">\r\n                    <rect x="0" y="0" width="50" height="50" fill="#fff" />\r\n                    <text text-anchor="middle" x="25" y="42" font-size="40" font-family="arial">T</text>\r\n                </mask>\r\n            </defs>\r\n            <rect x="0" y="0" width="50" height="50" mask="url(#mask)" fill="rgb(0, 180, 140)" fill-opacity="1"/>\r\n        </svg>\r\n    </div>\r\n    \x3c!-- Content --\x3e\r\n    <div id="tag-content">\r\n        <a href="#">\r\n            \x3c!-- TODO: Replace settings S with icon --\x3e\r\n            <div id="tag-settings-icon" title="Open Settings Website">\r\n                <i class="fa fa-cog fa-3x"></i>\r\n            </div>\r\n        </a>\r\n        <form name="new-message">\r\n            <textarea type="text" placeholder="New Tag"></textarea>\r\n            <button type="submit">Post Tag</button>\r\n        </form>\r\n        <ul id="tag-messages"></ul>\r\n    </div>\r\n</div>'),(0,a.default)()},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.default=function(){var e=function(){function e(n){r(this,e),this.baseUrl=n}return a(e,[{key:"apiCall",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=this.baseUrl+n;switch(t){case"GET":var a="?"+Object.entries(e).map(function(e){return e.join("=")}).join("&");return this._get(r+a);case"POST":return this._post(r,e);default:return Promise.reject("unsupported method")}}},{key:"_get",value:function(e){return new Promise(function(n,t){$.getJSON(e).done(n).fail(t)})}},{key:"_post",value:function(e,n){return new Promise(function(t,r){$.post(e,n).done(t).fail(r)})}}]),e}(),n=new e("https://stickertags2.glitch.me/api/");n.getMessages=function(){var e={website:t()};return this.apiCall(e,"getMessages")},n.postMessage=function(e){var n={website:t(),messageText:e};return this.apiCall(n,"postMessage","POST")};var t=function(){var e=window.location.host+window.location.pathname;return e.includes("index.")&&(e=e.substring(0,e.indexOf("index."))),e};$(document).ready(function(){$("#tag-trigger-icon").on("click",function(e){$("#tag-main").toggleClass("tag-small")}),n.getMessages().then(function(e){console.log("Loaded messages",e),s(e.length?e:[{author:"Tag Team",text:"#First"}])}).catch(function(e){var n="";n=e.hasOwnProperty("success")?"Not logged in":"Could not load messages",console.error(e),i(n)}),l()});var i=function(e){return o({Name:"[ERROR]",Message:e})},s=function(e){return e.forEach(u)},o=function(e){return $("#tag-messages").prepend(c(e))},u=function(e){return $("#tag-messages").append(c(e))},c=function(e){return'\n    <li class="tag-message">\n        <header>\n            <h4 class="tag-author">'+e.Name+'</h4>\n        </header>\n        <p class="tag-text">'+e.Message+"</p>\n    </li>\n"},l=function(){$('form[name="new-message"] *').focus(function(e){$(this).parent().children('button[type="submit"]').fadeIn()});var e=function(e){e.preventDefault();var t=$('form[name="new-message"] textarea').val();console.log("postMessage",t),n.postMessage(t).then(function(e){$('form[name="new-message"] textarea').val(""),o(e)}).catch(function(){return alert("Error while creating message :/")})};$('form[name="new-message"]').submit(e),$('form[name="new-message').keydown(function(n){n.ctrlKey&&13===n.which&&e(n)})}}}]);